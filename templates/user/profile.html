{% extends "includes/base.html" %}

<!-- {% load staticfiles %} -->


{% if 'visitor' in request.session %}

{% block title %}User Profile{% endblock %}

{% block menu %}
{% include "includes/menu.html" %}
{% endblock %}

{% block content %}
	Hey
    {{visitor.Id}}
    {{visitor.Name}}





    <span class='err'>{{err}}</span>


    
    <div class="parallax-container">
      <div class="parallax"><img src="http://materializecss.com/images/parallax1.jpg"></div>
    </div>
        

    <div  id="makeBooking" class="section scrollspy ">
		<form method="POST" action="search/">
            {% csrf_token %}
<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.98.0/css/materialize.css" />

		<!-- <h4>Make Booking</h4><br>

		Select Start Date <input type="date" class="datepicker" name='checkIn'>
		Select End Date <input type="date" class="datepicker" name='checkOut'>

		 <div class="input-field col s12">
		    <select name="FoodId">
		      <option value="1" disabled selected>Choose your Food Preference</option>
		      <option value="1">Veg</option>
		      <option value="2">Non Veg</option>
		    </select>
		    <label>Food </label>
	  	</div>
 -->

 		<div class="all black section " style='position:relative; top:200px;'>
  <div class="row container">
  <div class="col m4">

    <input type="date" class="datepicker">
  </div>
  <div class="col m4">

    <input type="date" class="datepicker">
  </div>
        <!-- Page Content goes here -->
  </div>

</div>

 <!--  <button class="btn waves-effect waves-light" type="submit" name="action">Submit
    <!-- <i class="material-icons right">send</i> -->
  </button>
  -->       
		 </form>
		 <script>

		  $('.datepicker').pickadate({
		    selectMonths: true, // Creates a dropdown to control month
		    selectYears: 15, // Creates a dropdown of 15 years to control year
		    format: 'yyyy-mm-dd',
		    closeOnSelect: true,
            closeOnClear: true,
		  });
		   $(document).ready(function(){
		   	    $('select').material_select();
		  $('.bookings_form').on('click',function(){
			  	// alert($( this ).find( 'input' ).attr( "value"));
			  	$(this).find('form:first').submit();
		  		// alert($(this).find('input');
		  });
		  $(document).ready(function(){
    $('.scrollspy').scrollSpy();
  });

		});


		   $(document).ready(function(){
      $('.parallax').parallax();
    });
        </script>

	</div>



    <div class="row">
    <div class="col m8 l8 s 12">
    <div class="container section scrollspy"  id="bookingHistory" style='position: relative;top:200px'>
    <table class="striped">
    	<!-- <caption> Bookings History</caption> -->
    	<thead>
    	<tr>
			<td>GNR</td>
			<td>UserId</td>
			<td>RoomId</td>
			<td>FoodId</td>
			<td>StartTime</td>
			<td>EndTime</td>
			<td>AmountReq</td>
			<td>AmountPaid</td>
			<td>Status</td>
			<td>Reason</td>
			<td>BookingTime</td>
		</tr>
		</thead>

	<tbody>	
	{% for buking in all_bookings %}	
		
		<tr class='bookings_form'>
			<form method="POST" action="{% url 'user:showBooking' %}" class="bookings_form">
            {% csrf_token %}
				<input type='hidden' name="showBooking" value="{{buking.GNR}}">
			</form>
			<td>{{buking.GNR}}</td>
			<td>{{buking.UserId}}</td>
			<td>{{buking.RoomId}}</td>
			<td>{{buking.FoodId}}</td>
			<td>{{buking.StartTime}}</td>
			<td>{{buking.EndTime}}</td>
			<td>{{buking.AmountReq}}</td>
			<td>{{buking.AmountPaid}}</td>
			<td>{{buking.getStatus}}</td>
			<td>{{buking.Reason}}</td>
			<td>{{buking.BookingTime}}</td>
		</tr>
	{% endfor %}

	</tbody>
	</table>
	</div>
	<br><br>
	</div>
	
	</div>
{% endblock %}




{% endif %}